---
status: draft
---

# Sprint 012 Technical Plan

## Architecture Overview

All changes are in `claude_agent_skills/init_command.py` (`run_init`
function) and the test file. The init command gains three new steps:

1. Write `AGENTS.md` from a bundled template
2. Create `.codex -> .claude` symlink
3. Append `.gitignore` entries

The existing `.github/copilot/instructions/` mirror step is removed.

## Component Design

### Component: AGENTS.md generation (SUC-001)

Add a new content constant `AGENTS_MD_CONTENT` with the SE process
overview. Write it to `AGENTS.md` at the project root using the same
idempotent pattern as `_write_rule_file`.

### Component: Remove Copilot mirror (SUC-002)

Delete the Copilot mirror loop in `run_init`. Update tests that assert
on `.github/copilot/instructions/` files.

### Component: .codex symlink (SUC-003)

After writing `.claude/` files, create a symlink `.codex -> .claude`
using `Path.symlink_to()`. Handle the case where the symlink already
exists and points to the right target.

### Component: .gitignore management (SUC-004)

Add a `_update_gitignore` function that:
1. Reads existing `.gitignore` (if any)
2. Defines a CLASI marker block with entries
3. Appends the block if the marker isn't already present
4. Writes the file

Marker format:
```
# CLASI (auto-generated by clasi init)
.claude/
.codex
.mcp.json
AGENTS.md
# End CLASI
```
