---
id: '004'
title: Add .gitignore entries for CLASI-installed files
status: done
use-cases:
- SUC-004
depends-on:
- '001'
- '003'
---

# Add .gitignore entries for CLASI-installed files

## Description

Add a `_update_gitignore` function to `init_command.py` that appends a
CLASI marker block to `.gitignore`:

```
# CLASI (auto-generated by clasi init)
.claude/
.codex
.mcp.json
AGENTS.md
# End CLASI
```

If the marker is already present, skip (idempotent). If `.gitignore`
doesn't exist, create it. Preserve existing content.

## Acceptance Criteria

- [ ] `.gitignore` is created or appended to
- [ ] Marker block prevents duplication on re-run
- [ ] All CLASI-installed files are covered
- [ ] Existing `.gitignore` content preserved

## Testing

- **Existing tests to run**: `uv run python -m pytest tests/unit/test_init_command.py`
- **New tests to write**: Test gitignore creation, append, idempotency, preserves existing
- **Verification command**: `uv run python -m pytest`
